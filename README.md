# My dotfiles

Finally starting what I should've done years ago and versioned my dotfiles!

I'm following the approach in [this blog post](https://www.atlassian.com/git/tutorials/dotfiles), with these tweaks:

* Using `dotfiles` as my alias and `~/.dotfiles` as the repo location
* Using fish instead of bash

## How to set up

Run the following:

```fish
git init --bare $HOME/.dotfiles
# consider tweaking the autogenerated description in $__fish_config_dir/functions/dotfiles.fish
alias -s dotfiles='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'
dotfiles config --local status.showUntrackedFiles no
dotfiles remote add origin git@github.com:you/dotfiles.git
```

Then use git subcommands with `dotfiles` from anywhere:

```
dotfiles add $__fish_config_dir/functions/myfunction.fish
dotfiles commit -m "Add myfunction"
cd ~/.config/foo
dotfiles add .foo
dotfiles commit -m "Add foo config"
dotfiles.push
```

## How to restore to a new machine

```fish
# You'll need the alias again on the new machine
alias -s dotfiles='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'
# Apparently prevents problems during the checkout
echo ".dotfiles" >> .gitignore
git clone --bare git@github.com:you/dotfiles.git $HOME/.dotfiles
dotfiles checkout
dotfiles config --local status.showUntrackedFiles no
```

If the checkout fails due it not wanting to overwrite existing files, review their contents as appropriate and try again.

You can then delete the readme and have git ignore it:

```
rm README.md
dotfiles update-index --skip-worktree README.md
```

If you need to change the readme, unignore it: `dotfiles update-index --no-skip-worktree README.md`
